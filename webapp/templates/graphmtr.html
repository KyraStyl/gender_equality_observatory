{% extends 'base.html' %}

{% block title %}Graph Metrics{% endblock %}

{% block content %}
<div class="container row w-100 justify-content-center">
<div class="row container align-self-center w-75 mt-2">
        {% for item in info%}
        <div class="col w-25 card border-info mx-1 mb-3">
          <div class="card-header h5 text-center"><b>Number of {{item[0]}}</b></div>
          <div class="card-body text-center text-info">
            <h3 class="card-title text-center">{{item[1]}}</h3>
            <h6 class="card-text"><i>{{item[1]}} different {{item[0]}}</i></h6>
          </div>
        </div>
        {% endfor%}
</div>
<div class="container mt-2 align-self-center justify-content-center">

    <div class="row justify-content-center">
        <div class="col-md-2">
          <div class="card-counter primary" title="dsadadasdasds" >
            <i class="fa fa-users"></i>
            <span class="count-numbers">{{louvain}}</span>
            <span class="count-name" > Louvain</span>
          </div>
        </div>

        <div class="col-md-2">
          <div class="card-counter danger">
            <i class="fa fa-users"></i>
            <span class="count-numbers">{{scc}}</span>
            <span class="count-name">SCC</span>
          </div>
        </div>

        <div class="col-md-2">
          <div class="card-counter success">
            <i class="fa fa-users"></i>
            <span class="count-numbers">{{wcc}}</span>
            <span class="count-name">WCC</span>
          </div>
        </div>

        <div class="col-md-2">
          <div class="card-counter info">
            <i class="fa fa-users"></i>
            <span class="count-numbers">{{triangles}}</span>
            <span class="count-name">Triangles</span>
          </div>
        </div>
        <div class="col-md-2">
            <div class="card-counter warning">
              <i class="fa fa-users"></i>
              <span class="count-numbers">{{modularity}}</span>
              <span class="count-name">Modularity</span>
            </div>
          </div>
      </div>
</div>
</div>

<script>
  function draw() {
      var config = {
          container_id: "viz",
          server_url: "bolt://localhost:7687",
          server_user: "neo4j",
          server_password: "a",
          labels: {
              "University": {
                  caption: "name",
                 
              },
              "Department": {
                  caption: "name",
                  
                 
              },
              "Professor": {
                  caption: "name",
                  community:"genderFlag",
                  imageUrl: "url_picture",
                  
              },
              
              
          },
          
          relationships: {
              "belongsTo": {
                  caption: false
                  
              },
              "worksAt":{
                caption:false

              }
          },
         
          
         
          initial_cypher: "MATCH (p:Professor)-[r1:worksAt]->(d:Department)-[r2:belongsTo]->(u:University) RETURN *"
      }

      var viz = new NeoVis.default(config);
      viz.render();

      var config1 = {
          container_id: "viz1",
          server_url: "bolt://localhost:7687",
          server_user: "neo4j",
          server_password: "a",
          labels: {
              "University": {
                  caption: "name",
                 
              },
              "Department": {
                  caption: "name",
                  
                 
              },
              "Professor": {
                  caption: "name",
                  community:"genderFlag",
                  imageUrl: "url_picture",
                  
              },
              "Coauthor":
                    {
                        caption:"name",
                        size:"citedby",
                        community:"genderFlag"
                    }
              
              
          },
          
          relationships: {
              "cooperateWith": {
                  caption: false,
                  thickness:"citedby"
                  
              },
              "worksAt":{
                caption:false

              },
              "belongsTo":{
                caption:false
              }
          },
         
          
         
          initial_cypher: "MATCH (n:Coauthor)-[r:cooperateWith]->(p:Professor) RETURN *"
      }

      var viz1 = new NeoVis.default(config1);
      viz1.render();




      
    
  }
</script>
<body onload="draw()">

  
<br>
<br>
<div class="container" >
  <div class="row" style="margin-left: 5em;">
  <h5>Professor Gender:</h5>   <!-- press the radio buttons and then press the thrid tab-->
  <div class="col">
    <input type="radio" name="prof" value="M">Male</input>
    <input type="radio" name="prof" value="F">Female</input>
</div>

<h5>CoAuthor Gender:</h5>
<div class="col">
  <input type="radio" name="coauthors" value="M">Male</input>
  <input type="radio" name="coauthors" value="F">Female</input>
</div>
</div>
</div>
<br>
<div class="container">
  

    <div class="tab">
      <button class="tablinks" onclick="openCity(event, 'London')">Professors Department Universities</button>
      <button class="tablinks" onclick="openCity(event, 'Paris')">All CoAuthors </button>
      <button class="tablinks" onclick="openCity(event, 'Tokyo'),ProGenderCoauthors();">Professor-Gender-CoAuthor</button>
    </div>
    
    <div id="London" class="tabcontent">
      
        <div id="viz"  style="height: 500px!important; width: 100%!important;"></div>    
    
    </div>
    
    <div id="Paris" class="tabcontent">
      <div id="viz1"  style="height: 500px!important; width: 100%!important;"></div>   
    </div>
    
    <div id="Tokyo" class="tabcontent">
      <div id="viz2"  style="height: 500px!important; width: 100%!important;"></div>
    </div>
</div>



    <script>

      function ProGenderCoauthors(){
        var profg=document.querySelector('input[name = "prof"]:checked').value;
        var cog=document.querySelector('input[name = "coauthors"]:checked').value;
       
        var config2 = {
          container_id: "viz2",
          server_url: "bolt://localhost:7687",
          server_user: "neo4j",
          server_password: "a",
          labels: {
              "Professor": {
                  caption: "name",
                  community:"genderFlag",
                  imageUrl: "url_picture",
                  
              },
              "Coauthor":
                    {
                        caption:"name",
                        size:"citedby",
                        community:"genderFlag"
                    }              
          },
          
          relationships: {
              "cooperateWith": {
                  caption: false,
                  thickness:"citedby" 
              }
          },
            initial_cypher: "MATCH (p1:Professor {gender:'"+profg+"'})-[r:cooperateWith]->(p2 {gender:'"+cog+"'}) RETURN *"
      }

      var viz2 = new NeoVis.default(config2);
      viz2.render();

      }
    function openCity(evt, cityName) {
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }
      tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
      document.getElementById(cityName).style.display = "block";
      evt.currentTarget.className += " active";
    }
    </script>


  <script>
      $('#myCollapsible').collapse({
toggle: false
})
  </script>

{% endblock %}